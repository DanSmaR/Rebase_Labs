#!/bin/bash

# Function to start the application with Docker Compose
start() {
  mkdir -p ~/docker_volumes/medical_exams_db
  cd app && docker compose up && cd ..
}

# Function to stop the application with Docker Compose
stop() {
  cd app && docker compose down && cd ..
  docker system prune --volumes
}

# Function to rebuild the application with Docker Compose
rebuild() {
  stop
  docker rmi medical_exams_api:tag
  docker rmi medical_exams_client:tag
  start_compose
}

logs() {
  cd app && docker compose logs && cd ..
}

case $1 in
    start)
        start
        ;;
    stop)
        stop
        ;;
    rebuild)
        rebuild
        ;;
    logs)
        logs
        ;;
    *)
        echo "Usage: bin/dev {start|stop|rebuild|logs}"
        ;;
esac
